#  React Hooks:
专拽 Hooks  驻拽爪转 砖驻砖专转  砖转砖 转转 驻转 砖 专 驻拽爪, 拽 专拽 专 砖拽.  驻砖专  砖转祝 驻注 拽 转专 注 拽 驻 砖 专  转 爪 爪 转.   -Hooks 驻爪 转专:

- [x] 1. **useState:** 驻砖专  住祝 爪 拽 专.  驻砖专  砖专 注专 住驻爪驻 注 转 转 驻注转 砖转砖.

- [x] 2. **useEffect:** 驻砖专  砖转砖 驻注转 爪 转 专,  爪注 砖转转 专砖转, 专砖 专注 DOM,   驻注 专转 砖专砖转   拽 专.

- [x] 3. **useContext:** 驻砖专  注专 注专 转 专 转专 砖 注 砖 专, 驻 专住 转专 砖专 砖砖 -props.

- [x] 4. **useReducer:** 转 砖转砖 -Hooks    爪 专 转专,  砖砖 -Redux, 转  注 砖爪 专.

- [x] 5. **useCallback - useMemo:** 砖砖 砖 -Hooks  注专 注 专转 爪 转专 注  砖 转 砖 驻拽爪转  注专 专拽 砖专  砖转 转.

---


#  Redux:
住驻专  爪 (state management) 驻拽爪转 React. 注 注专 转 注 注转 专转 砖  爪 砖专 驻拽爪  驻转 专转 转专. 

### 砖 住住 -Redux:

1. **Store**:
   - 拽 专 砖 砖专  爪 砖 驻拽爪.  拽   转  转 砖 驻拽爪.

2. **Action**:
   - 拽 爪 驻注 砖转专砖转 驻拽爪.  驻注  住 `(type)`   转 住驻 `(payload)`.

3. **Reducer**:
   - 驻拽爪 砖拽转 转 爪  转 驻注, 专 爪 砖. -reducer  专 (pure function)  转 专 爪 砖  砖转 转 爪 拽.

4. **Dispatch**:
   - 驻拽爪 砖转 驻注转 (actions) -store. 爪注转 `dispatch` 转 驻注 砖 爪.

### 注拽专转 驻转:

1. **Source of Truth**: `爪 砖  驻拽爪 砖专 注抓 爪  砖 注  `住专.
2. **State is Read-Only**:  (action) .专  砖转 转 爪  爪注转 砖转 驻注  拽 砖转专  拽专.
3. **Changes are Made with Pure Functions by `reducers`**.


### 砖砖 -Redux:
1. **React-Redux**:
   - 住驻专转  砖专转  React -Redux 住驻拽转 API  砖砖 -Redux 转 拽驻转 React.

2. **Provider**:
   - 拽驻 住驻拽转 转 -store  拽驻转 砖 React 砖专转 .

3. **useSelector -useDispatch**:
   - 住驻拽 砖  爪 -dispatch 拽驻转.

---

###   住住转:

1. 爪专转 转 (store):

```javascript
import { createStore } from 'redux';

const initialState = {
  count: 0
};

const reducer = (state = initialState, action) => {
  switch(action.type) {
    case 'INCREMENT':
      return { ...state, count: state.count + 1 };
    case 'DECREMENT':
      return { ...state, count: state.count - 1 };
    default:
      return state;
  }
};

const store = createStore(reducer);
```

2. 专 React -Redux:

```javascript
import React from 'react';
import ReactDOM from 'react-dom';
import { Provider } from 'react-redux';
import App from './App'; // 拽驻 专砖转 砖 驻拽爪
import store from './store'; // -store 砖爪专 拽

ReactDOM.render(
  <Provider store={store}>
    <App />
  </Provider>,
  document.getElementById('root')
);
```

3. 砖砖 -useSelector -useDispatch 拽驻:

```javascript
import React from 'react';
import { useSelector, useDispatch } from 'react-redux';

const Counter = () => {
  const count = useSelector(state => state.count);
  const dispatch = useDispatch();

  return (
    <div>
      <p>{count}</p>
      <button onClick={() => dispatch({ type: 'INCREMENT' })}>+</button>
      <button onClick={() => dispatch({ type: 'DECREMENT' })}>-</button>
    </div>
  );
};

export default Counter;
```

---


###   拽 砖:


### File: `store.js`
```javascript
import { createContext, useReducer } from 'react';

// Create a context to share state and dispatch function across the component tree
export const Store = createContext();

// Define the initial state with default values or values from localStorage
const initialState = {
  userInfo: 
    localStorage.getItem('userInfo') 
      ? JSON.parse(localStorage.getItem('userInfo')) 
      : null,
  cart: {
    shippingAddress: localStorage.getItem('shippingAddress')
      ? JSON.parse(localStorage.getItem('shippingAddress'))
      : {},
    paymentMethod: localStorage.getItem('paymentMethod')
      ? localStorage.getItem('paymentMethod')
      : '',
    cartItems: localStorage.getItem('cartItems')
      ? JSON.parse(localStorage.getItem('cartItems'))
      : [],
  },
};

// Reducer function to handle state transitions based on action types
function reducer(state, action) {
  switch (action.type) {
    case 'CART_ADD_ITEM':
      const newItem = action.payload;
      const existItem = state.cart.cartItems.find(item => item._id === newItem._id);

      // Update cartItems based on whether the item already exists or is new
      const cartItems = existItem
        ? state.cart.cartItems.map(item => 
            item._id === existItem._id ? newItem : item)
        : [...state.cart.cartItems, newItem];

      // Save the updated cartItems to localStorage
      localStorage.setItem('cartItems', JSON.stringify(cartItems));

      // Return the updated state with new cart items
      return { ...state, cart: { ...state.cart, cartItems } };

    case 'CART_REMOVE_ITEM': {
      const cartItems = state.cart.cartItems.filter(
        item => item._id !== action.payload._id
      );

      // Save the updated cartItems to localStorage
      localStorage.setItem('cartItems', JSON.stringify(cartItems));

      // Return the updated state with the item removed
      return { ...state, cart: { ...state.cart, cartItems } };
    }

    case 'CART_CLEAR':
      // Clear cart items and return the updated state
      return { ...state, cart: { ...state.cart, cartItems: [] } };

    case 'USER_SIGNIN':
      // Update userInfo with the new user data
      return { ...state, userInfo: action.payload };

    case 'USER_SIGNOUT':
      // Clear user info and reset cart on signout
      return {
        ...state,
        userInfo: null,
        cart: {
          cartItems: [],
          shippingAddress: {},
          paymentMethod: '',
        },
      };

    case 'SAVE_SHIPPING_ADDRESS':
      // Update shipping address in the cart
      return {
        ...state,
        cart: { ...state.cart, shippingAddress: action.payload },
      };

    case 'SAVE_PAYMENT_METHOD':
      // Update payment method in the cart
      return {
        ...state,
        cart: { ...state.cart, paymentMethod: action.payload },
      };

    default:
      // Return the current state if action type is not recognized
      return state;
  }
}

// StoreProvider component to wrap the application and provide state and dispatch
export function StoreProvider(props) {
  const [state, dispatch] = useReducer(reducer, initialState);
  const value = { state, dispatch };
  return <Store.Provider value={value}>{props.children}</Store.Provider>;
}
```
<br>


### File: `index.js`
<details><summary><b>See Imports</b></summary>
 <p>
  
  ```javascript 
   import React from 'react';
   import ReactDOM from 'react-dom/client';
   import './index.css';
   import App from './App';
   import reportWebVitals from './reportWebVitals';
   import 'bootstrap/dist/css/bootstrap.min.css'; // Import Bootstrap CSS for styling
   import { HelmetProvider } from 'react-helmet-async'; // HelmetProvider for managing the document head
   import { StoreProvider } from './Store'; // Import the StoreProvider component
   import { PayPalScriptProvider } from '@paypal/react-paypal-js'; // Import PayPal scripts for payment integration
  ```

 </p>
</details>

```javascript
// Create a root for React rendering
const root = ReactDOM.createRoot(document.getElementById('root'));

// Render the application wrapped in StoreProvider, HelmetProvider, and PayPalScriptProvider
root.render(
  <StoreProvider>
    <HelmetProvider>
      <PayPalScriptProvider deferLoading={true}>
        <App />
      </PayPalScriptProvider>
    </HelmetProvider>
  </StoreProvider>
);

reportWebVitals(); // Report web vitals for performance monitoring
```

<br>

### File: `ProductScreen.js`
<details><summary><b>See Imports</b></summary>
 <p>
  
  ```javascript 
   import axios from 'axios';
   import { useContext, useEffect, useReducer, useRef, useState } from 'react';
   import { Link, useNavigate, useParams } from 'react-router-dom';
   import Row from 'react-bootstrap/Row';
   import Col from 'react-bootstrap/Col';
   import Card from 'react-bootstrap/Card';
   import ListGroup from 'react-bootstrap/ListGroup';
   import Badge from 'react-bootstrap/Badge';
   import Button from 'react-bootstrap/Button';
   import Rating from '../components/Rating';
   import { Helmet } from 'react-helmet-async';
   import LoadingBox from '../components/LoadingBox';
   import MessageBox from '../components/MessageBox';
   import { getError } from '../utils';
   import { Store } from '../Store';
   import Form from 'react-bootstrap/Form';
   import FloatingLabel from 'react-bootstrap/FloatingLabel';
   import { toast } from 'react-toastify';
  ```

 </p>
</details>

```javascript
// Reducer function to handle product-related actions
const reducer = (state, action) => {
  switch (action.type) {
    case 'REFRESH_PRODUCT':
      return { ...state, product: action.payload };
    case 'CREATE_REQUEST':
      return { ...state, loadingCreateReview: true };
    case 'CREATE_SUCCESS':
      return { ...state, loadingCreateReview: false };
    case 'CREATE_FAIL':
      return { ...state, loadingCreateReview: false };
    case 'FETCH_REQUEST':
      return { ...state, loading: true };
    case 'FETCH_SUCCESS':
      return { ...state, product: action.payload, loading: false };
    case 'FETCH_FAIL':
      return { ...state, loading: false, error: action.payload };
    default:
      return state;
  }
};

function ProductScreen() {
  let reviewsRef = useRef(); // Reference to the reviews section

  const [rating, setRating] = useState(0); // State for the rating input
  const [comment, setComment] = useState(''); // State for the comment input
  const navigate = useNavigate(); // Hook to navigate programmatically

  const params = useParams(); // Hook to access route parameters
  const { slug } = params; // Destructure the slug parameter

  // Initialize reducer to manage product state
  const [{ loading, error, product, loadingCreateReview }, dispatch] =
    useReducer(reducer, {
      product: [], // Initial product state
      loading: true, // Loading state to show a spinner initially
      error: '', // Error state to handle any errors during data fetching
    });

  useEffect(() => {
    // Function to fetch product data based on the slug
    const fetchData = async () => {
      dispatch({ type: 'FETCH_REQUEST' }); // Dispatch FETCH_REQUEST action before starting the fetch
      try {
        const result = await axios.get(`/api/products/slug/${slug}`);
        dispatch({ type: 'FETCH_SUCCESS', payload: result.data }); // Dispatch FETCH_SUCCESS action with fetched data
      } catch (err) {
        dispatch({ type: 'FETCH_FAIL', payload: getError(err) }); // Dispatch FETCH_FAIL action with error
      }
    };
    fetchData(); // Call fetchData to initiate data fetching
  }, [slug]); // Dependency array to re-fetch when slug changes

  const { state, dispatch: ctxDispatch } = useContext(Store); // Access global state and dispatch
  const { cart, userInfo } = state; // Destructure cart and userInfo from global state

  // Handler to add product to cart
  const addToCartHandler = async () => {
    const existItem = cart.cartItems.find((x) => x._id === product._id);
    const quantity = existItem ? existItem.quantity + 1 : 1;
    const { data } = await axios.get(`/api/products/${product._id}`);
    if (data.countInStock < quantity) {
      window.alert('Sorry. Product is out of stock');
      return;
    }

    ctxDispatch({
      type: 'CART_ADD_ITEM',
      payload: { ...product, quantity },
    });
    navigate('/cart'); // Navigate to cart page
  };

  // Handler to submit a product review
  const submitHandler = async (e) => {
    e.preventDefault(); // Prevent default form submission
    if (!comment || !rating) {
      toast.error('Please enter comment and rating');
      return;
    }
    try {
      const { data } = await axios.post(
        `/api/products/${product._id}/reviews`,
        { rating, comment, name: userInfo.name },
        {
          headers: { Authorization: `Bearer ${userInfo.token}` }, // Send authorization header with the token
        }
      );

      dispatch({ type: 'CREATE_SUCCESS' }); // Dispatch CREATE_SUCCESS action
      toast.success('Review submitted successfully');

      // Update product reviews with the new review
      product.reviews.unshift(data.review);
      product.numReviews = data.numReviews;
      product.rating = data.rating;

      dispatch({ type: 'REFRESH_PRODUCT', payload: product }); // Dispatch REFRESH_PRODUCT action to update product

 state

      // Scroll to the reviews section
      window.scrollTo({
        behavior: 'smooth',
        top: reviewsRef.current.offsetTop,
      });
    } catch (error) {
      toast.error(getError(error));
      dispatch({ type: 'CREATE_FAIL' }); // Dispatch CREATE_FAIL action if review submission fails
    }
  };
```

<details><summary><b>See Rendered Output</b></summary>
 <p>
  
  ```javascript 
     return loading ? (
       <LoadingBox /> // Show loading box while fetching data
     ) : error ? (
       <MessageBox variant="danger">{error}</MessageBox> // Show error message if there's an error
     ) : (
       <div>
         {/* Display product details */}
         <Row>
           <Col md={6}>
             <img className="img-large" src={product.image} alt={product.name}></img>
           </Col>
           <Col md={3}>
             <ListGroup variant="flush">
               <ListGroup.Item>
                 <Helmet>
                   <title>{product.name}</title>
                 </Helmet>
                 <h1>{product.name}</h1>
               </ListGroup.Item>
               <ListGroup.Item>
                 <Rating rating={product.rating} numReviews={product.numReviews}></Rating>
               </ListGroup.Item>
               <ListGroup.Item>Price : ${product.price}</ListGroup.Item>
               <ListGroup.Item>
                 Description:
                 <p>{product.description}</p>
               </ListGroup.Item>
             </ListGroup>
           </Col>
           <Col md={3}>
             <Card>
               <Card.Body>
                 <ListGroup variant="flush">
                   <ListGroup.Item>
                     <Row>
                       <Col>Price:</Col>
                       <Col>${product.price}</Col>
                     </Row>
                   </ListGroup.Item>
                   <ListGroup.Item>
                     <Row>
                       <Col>Status:</Col>
                       <Col>
                         {product.countInStock > 0 ? (
                           <Badge bg="success">In Stock</Badge>
                         ) : (
                           <Badge bg="danger">Unavailable</Badge>
                         )}
                       </Col>
                     </Row>
                   </ListGroup.Item>
   
                   {/* Conditionally render the Add to Cart button if in stock */}
                   {product.countInStock > 0 && (
                     <ListGroup.Item>
                       <div className="d-grid">
                         <Button onClick={addToCartHandler} variant="primary">
                           Add to Cart
                         </Button>
                       </div>
                     </ListGroup.Item>
                   )}
                 </ListGroup>
               </Card.Body>
             </Card>
           </Col>
         </Row>
   
         {/* Display product reviews */}
         <div className="my-3">
           <h2 ref={reviewsRef}>Reviews</h2>
           <div className="mb-3">
             {product.reviews.length === 0 && (
               <MessageBox>There is no review</MessageBox>
             )}
           </div>
           <ListGroup>
             {product.reviews.map((review) => (
               <ListGroup.Item key={review._id}>
                 <strong>{review.name}</strong>
                 <Rating rating={review.rating} caption=" "></Rating>
                 <p>{review.createdAt.substring(0, 10)}</p>
                 <p>{review.comment}</p>
               </ListGroup.Item>
             ))}
           </ListGroup>
           <div className="my-3">
             {userInfo ? (
               <form onSubmit={submitHandler}>
                 <h2>Write a customer review</h2>
                 <Form.Group className="mb-3" controlId="rating">
                   <Form.Label>Rating</Form.Label>
                   <Form.Select
                     aria-label="Rating"
                     value={rating}
                     onChange={(e) => setRating(e.target.value)}
                   >
                     <option value="">Select...</option>
                     <option value="1">1- Poor</option>
                     <option value="2">2- Fair</option>
                     <option value="3">3- Good</option>
                     <option value="4">4- Very good</option>
                     <option value="5">5- Excellent</option>
                   </Form.Select>
                 </Form.Group>
                 <FloatingLabel
                   controlId="floatingTextarea"
                   label="Comments"
                   className="mb-3"
                 >
                   <Form.Control
                     as="textarea"
                     placeholder="Leave a comment here"
                     value={comment}
                     onChange={(e) => setComment(e.target.value)}
                   />
                 </FloatingLabel>
   
                 <div className="mb-3">
                   <Button disabled={loadingCreateReview} type="submit">
                     Submit
                   </Button>
                   {loadingCreateReview && <LoadingBox></LoadingBox>}
                 </div>
               </form>
             ) : (
               <MessageBox>
                 Please{' '}
                 <Link to={`/signin?redirect=/product/${product.slug}`}>
                   Sign In
                 </Link>{' '}
                 to write a review
               </MessageBox>
             )}
           </div>
         </div>
       </div>
     );
   }
   export default ProductScreen;
  ```

 </p>
</details>





---
<br>


##  React Hooks Examples:

1. **useState:**
   ```javascript
   import React, { useState } from 'react';

   function Counter() {
       const [count, setCount] = useState(0);

       return (
           <div>
               <p>Count: {count}</p>
               <button onClick={() => setCount(count + 1)}>Increment</button>
           </div>
       );
   }
   ```

2. **useEffect:**
   ```javascript
   import React, { useState, useEffect } from 'react';

   function Timer() {
       const [seconds, setSeconds] = useState(0);

       useEffect(() => {
           const interval = setInterval(() => {
               setSeconds(seconds => seconds + 1);
           }, 1000);
           return () => clearInterval(interval);
       }, []);

       return <p>Timer: {seconds} seconds</p>;
   }
   ```

3. **useContext:**
   ```javascript
   import React, { useContext } from 'react';

   const ThemeContext = React.createContext('light');

   function ThemedButton() {
       const theme = useContext(ThemeContext);
       return <button style={{ background: theme }}>Themed Button</button>;
   }
   ```

   

##  Redux Examples:

1. **Redux Store Configuration:**
   ```javascript
   import { createStore } from 'redux';
   import rootReducer from './reducers';

   const store = createStore(rootReducer);
   ```

2. **Redux Actions:**
   ```javascript
   // action types
   const INCREMENT = 'INCREMENT';

   // action creators
   function increment() {
       return { type: INCREMENT };
   }
   ```

3. **Redux Reducers:**
   ```javascript
   const initialState = {
       count: 0
   };

   function counterReducer(state = initialState, action) {
       switch (action.type) {
           case INCREMENT:
               return { ...state, count: state.count + 1 };
           default:
               return state;
       }
   }
   ```

4. **Connecting Redux with React Component:**
   ```javascript
   import React from 'react';
   import { useSelector, useDispatch } from 'react-redux';
   import { increment } from './actions';

   function Counter() {
       const count = useSelector(state => state.count);
       const dispatch = useDispatch();

       return (
           <div>
               <p>Count: {count}</p>
               <button onClick={() => dispatch(increment())}>Increment</button>
           </div>
       );
   }
   ```

---


##  注  专拽:

###   React?
**住驻专转 JavaScript 拽 驻转** 砖砖转 转 UI 转 专,  注专 驻拽爪转 注  (SPA).


###  转转 注拽专转 砖 React?
- 砖砖 JSX, 驻砖专转 驻转 转 HTML 拽 -JS 砖.
- 砖砖 -Virtual DOM 拽 -Real DOM 转砖  砖驻爪转 砖 Real DOM  拽专转.
- 转 注 爪 砖专转, 砖砖 注专 驻爪转 注 驻砖 (SEO).
- 注拽 专 专转 转  转   转  data binding.
- 砖转砖 专 UI 转 砖砖 专/专 驻转 转爪.

###   JSX?
爪 JavaScript XML. , 拽住 转 `<h1>` 专 驻拽爪转 JavaScript 驻拽爪转 注.
```jsx
export default function App() {
  return (
      <h1 className="greeting">{"Hello, this is a JSX Code!"}</h1>
  );
}
```
     
 ### 砖   拽驻:
 The JavaScript representation(Without JSX) of React Element would be as follows:
```javascript
    const element = React.createElement("div", { id: "login-btn" }, "Login");
```
and this element can be simiplified using JSX:

```html
      <div id="login-btn">Login</div>
```
The above React.createElement() function returns an object as below:
```javascript
{
  type: 'div',
  props: {
    children: 'Login',
    id: 'login-btn'
  }
}
```
住祝,   注 -DOM 爪注转 ReactDOM.render().

驻砖专 专 拽驻  爪专转,  转 拽住 注 转转 render()  驻拽爪.  拽专,  拽 驻专驻住 拽, 专 注抓 JSX 驻.

##   住 驻专驻住
- 住 砖 拽驻  拽 砖拽 注 住 砖注砖 砖转转   拽驻.  驻注 砖住 砖转, 拽驻 注砖 注专 砖. 
- 驻专驻住  拽 拽驻.  注专   拽  拽爪 砖 注专 注专 拽驻 注转 爪专  转转 HTML-tag. , 转 注专 专 专 专 .

专 注拽专转 : 注专转  转 砖转 专,专专 砖 住.
:
```jsx
      import React from "react";
      import ReactDOM from "react-dom";

      const ChildComponent = (props) => {
        return (
          <div>
            <p>{props.name}</p>
            <p>{props.age}</p>
            <p>{props.gender}</p>
          </div>
        );
      };

      const ParentComponent = () => {
        return (
          <div>
            <ChildComponent name="John" age="30" gender="male" />
            <ChildComponent name="Mary" age="25" geneder="female"/>
          </div>
        );
      };
```
转  砖转 砖专转 拽 砖 驻专驻住 注 destructing:
```jsx
  const ChildComponent = ({name, age, gender="male"}) => {
      return (
        <div>
          <p>{name}</p>
          <p>{age}</p>
          <p>{gender}</p>
        </div>
      );
    };
```

##   住 驻专驻住:
- 住  拽驻, 注 注 'useState', 砖 住  专 专专 砖 拽驻  砖.
- 驻专驻住 注专 拽驻 拽驻转 专,  拽专 , 专  转 注专 转 拽驻 注爪.
- 住  mutable (转 砖), 驻专驻住  immutable.


##   HTML -React event handling?
- HTML 转 拽:
```html
       <button onclick="activateLasers()"></button>
```

- 专拽 转 :
```jsx harmony
       <button onClick={activateLasers}>
```
  - HTML 驻砖专 专 FALSE  注 转转 驻转:
```html
       <a
         href="#"
         onclick='console.log("The link was clicked."); return false;'
       />
```
  - 专拽 爪专 拽专 - preventDefault():
```javascript
       function handleClick(event) {
         event.preventDefault();
         console.log("The link was clicked.");
       }
```

##   key prop 砖砖转砖  list?
驻专驻  注专 专拽 转  驻专 砖转.  爪专 转 ,   砖. 专" 拽 转 ID . 注专 拽注  拽驻 爪专 专专, 拽 专专 转  - 砖驻专 爪注.
```jsx harmony
    const todoItems = todos.map((todo) => <li key={todo.id}>{todo.text}</li>);
```

##  Virtual DOM
拽爪专 砖 Document Object Model. -DOM 爪 住 HTML 注  注抓 .  注祝 砖 注抓 住转 爪转,  爪转  拽.
专拽 砖专转 爪 拽 砖 -DOM 转 专, 注 转专 DOM 专. 砖专 住 砖 拽 砖转, -DOM 专 砖 专拽 转 拽  -DOM 转, 拽 注 转  拽.

## Lifting State Up in React
砖住' 拽驻转 爪专转 拽 转 住, 抓 专 转 住 注 专专,  砖 爪 专. 拽 转拽 砖 住  .

## styles in React
砖  专 住 专拽:
- Inline Styling
- JavaScript Object
- CSS Stylesheet

JavaScript Object:
```jsx harmony
    const divStyle = {
      color: "blue",
      backgroundImage: "url(" + imgUrl + ")",
    };

    function HelloWorldComponent() {
      return <div style={divStyle}>Hello World!</div>;
    }
```

## redux
住驻专转 拽 驻转 JS, 注 住.
拽驻转 砖 转: 
- Store: Holds the state of the application.
- Action: The source information for the store.
- Reducer: Specifies how the application's state changes in response to actions sent to the store.

## React Router
住驻专转 routing. 注 转拽  爪 砖  SPA 砖.  



---
